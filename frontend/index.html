<!DOCTYPE html>
<html>
<head>
    <title>Transit Feedback Agent</title>
</head>
<body>
<h1>Submit Transit Feedback</h1>
<form id="feedbackForm">
    <label for="text">Issue:</label><br>
    <textarea id="text" name="text" rows="4" cols="50"></textarea><br>

    <label for="location">Location:</label><br>
    <input type="text" id="location" name="location"><br>

    <label for="agency">Agency:</label><br>
    <input type="text" id="agency" name="agency"><br><br>

    <button type="submit">Submit</button>
</form>

<pre id="result"></pre>

<script>
    document.getElementById('feedbackForm').addEventListener('submit', async function(e) {
        e.preventDefault();

        const payload = {
            text: document.getElementById('text').value,
            location: document.getElementById('location').value,
            agency: document.getElementById('agency').value
        };

        const res = await fetch('http://localhost:3000/submit', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
        });

        const result = await res.json();
        document.getElementById('result').textContent = JSON.stringify(result, null, 2);
    });
</script>
</body>
</html>
